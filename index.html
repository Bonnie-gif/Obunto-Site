<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ARCS - Advanced Research & Containment System</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=VT323&family=IBM+Plex+Mono:wght@400;500;600&display=swap');

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --newton-bg: #e8e4d8;
  --newton-fg: #1a1a1a;
  --newton-border: #2a2a2a;
  --newton-highlight: #4a4a4a;
  --newton-shadow: rgba(0, 0, 0, 0.3);
  --newton-light: #f5f1e8;
  --loading-bg: #9b8b6f;
  --loading-fg: #f5f1e8;
  --pink: #ff69b4;
  --yellow: #ffd700;
  --gray: #666666;
}

body {
  font-family: 'IBM Plex Mono', 'VT323', monospace;
  background: var(--newton-bg);
  color: var(--newton-fg);
  overflow: hidden;
  cursor: default;
  -webkit-font-smoothing: none;
  font-smooth: never;
  image-rendering: pixelated;
}

.screen {
  display: none;
  width: 100vw;
  height: 100vh;
  position: fixed;
  top: 0;
  left: 0;
}

.screen.active {
  display: block;
}

#loading-screen {
  background: var(--loading-bg);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  animation: fadeIn 0.5s;
}

.loading-content {
  display: flex;
  align-items: center;
  gap: 40px;
}

.upeo-logo {
  width: 120px;
  height: 120px;
  position: relative;
  animation: pulse 2s infinite;
}

.upeo-bird {
  width: 100%;
  height: 100%;
  fill: var(--loading-fg);
}

.loading-text {
  color: var(--loading-fg);
  font-family: 'VT323', monospace;
  font-size: 18px;
  letter-spacing: 2px;
  line-height: 1.8;
  text-align: left;
}

.loading-bar {
  position: absolute;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%);
  width: 600px;
  height: 8px;
  background: rgba(0, 0, 0, 0.2);
  border: 2px solid var(--loading-fg);
}

.loading-progress {
  height: 100%;
  background: var(--loading-fg);
  width: 0%;
  transition: width 0.3s;
}

.plugin-icons {
  position: fixed;
  right: 40px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.plugin-icon {
  width: 50px;
  height: 50px;
  border: 3px solid var(--newton-fg);
  background: var(--loading-fg);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  font-weight: bold;
}

.data-swallow {
  position: fixed;
  bottom: 40px;
  right: 40px;
  width: 400px;
  border: 3px solid var(--newton-fg);
  background: var(--loading-fg);
  padding: 20px;
}

.swallow-header {
  display: flex;
  align-items: center;
  gap: 15px;
  margin-bottom: 15px;
}

.swallow-logo {
  font-family: 'VT323', monospace;
  font-size: 24px;
  font-weight: bold;
  padding: 5px 15px;
  background: #7dd3c0;
  color: var(--newton-fg);
  border: 2px solid var(--newton-fg);
}

.swallow-disk {
  width: 100px;
  height: 80px;
  background: var(--newton-fg);
  border: 2px solid var(--newton-fg);
  position: relative;
  padding: 10px;
  color: var(--loading-fg);
  font-size: 9px;
  line-height: 1.2;
}

.disk-circle {
  position: absolute;
  bottom: 5px;
  right: 5px;
  width: 20px;
  height: 20px;
  border: 2px solid var(--loading-fg);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

.swallow-text {
  font-family: 'VT323', monospace;
  font-size: 16px;
  letter-spacing: 1px;
}

#login-screen {
  background: var(--loading-bg);
  display: flex;
  align-items: center;
  justify-content: center;
}

.login-container {
  width: 600px;
  background: var(--newton-light);
  border: 4px solid var(--newton-border);
  box-shadow: 8px 8px 0 var(--newton-shadow);
  padding: 40px;
  position: relative;
}

.login-title {
  font-family: 'VT323', monospace;
  font-size: 32px;
  margin-bottom: 10px;
  text-align: center;
  letter-spacing: 3px;
}

.login-subtitle {
  font-size: 12px;
  text-align: center;
  margin-bottom: 30px;
  letter-spacing: 2px;
}

.input-group {
  margin-bottom: 25px;
}

.input-label {
  display: block;
  margin-bottom: 8px;
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 1px;
}

.newton-input {
  width: 100%;
  padding: 12px;
  border: 3px solid var(--newton-border);
  background: white;
  font-family: 'IBM Plex Mono', monospace;
  font-size: 16px;
  letter-spacing: 2px;
}

.newton-input:focus {
  outline: none;
  border-color: var(--newton-fg);
}

.button-group {
  display: flex;
  gap: 15px;
  margin-top: 30px;
}

.newton-btn {
  flex: 1;
  padding: 15px;
  border: 3px solid var(--newton-border);
  background: var(--newton-highlight);
  color: white;
  font-family: 'VT323', monospace;
  font-size: 20px;
  cursor: pointer;
  letter-spacing: 2px;
  transition: all 0.1s;
}

.newton-btn:hover {
  background: var(--newton-border);
  transform: translateY(-2px);
}

.newton-btn:active {
  transform: translateY(0);
  box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.newton-btn.primary {
  background: var(--newton-fg);
}

.status-message {
  margin-top: 20px;
  padding: 15px;
  border: 2px solid var(--newton-border);
  background: var(--yellow);
  text-align: center;
  font-size: 13px;
  letter-spacing: 1px;
  display: none;
}

.status-message.show {
  display: block;
  animation: slideDown 0.3s;
}

#dashboard {
  background: var(--newton-bg);
  padding: 20px;
  overflow-y: auto;
  height: 100vh;
}

.window {
  background: var(--newton-light);
  border: 3px solid var(--newton-border);
  box-shadow: 6px 6px 0 var(--newton-shadow);
  margin-bottom: 20px;
}

.window-title-bar {
  background: var(--newton-fg);
  color: white;
  padding: 8px 15px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-family: 'VT323', monospace;
  font-size: 18px;
  letter-spacing: 2px;
}

.window-close {
  width: 20px;
  height: 20px;
  background: var(--gray);
  border: 2px solid white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 16px;
  line-height: 1;
}

.window-content {
  padding: 20px;
}

.menu-bar {
  background: var(--newton-fg);
  color: white;
  padding: 10px 20px;
  display: flex;
  gap: 30px;
  font-family: 'VT323', monospace;
  font-size: 18px;
  letter-spacing: 2px;
  margin-bottom: 20px;
}

.menu-item {
  cursor: pointer;
  padding: 5px 10px;
  transition: background 0.2s;
}

.menu-item:hover {
  background: var(--newton-highlight);
}

.menu-item.active {
  background: var(--yellow);
  color: var(--newton-fg);
}

.banner-area {
  width: 100%;
  height: 250px;
  background: white;
  border: 3px solid var(--newton-border);
  margin-bottom: 20px;
  overflow: hidden;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.banner-mascot {
  width: 200px;
  height: 200px;
  position: relative;
}

.mascot-container {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.mascot-img {
  max-width: 100%;
  max-height: 100%;
  image-rendering: pixelated;
}

.mascot-speech {
  position: absolute;
  left: 220px;
  top: 20px;
  background: white;
  border: 3px solid var(--newton-fg);
  padding: 15px;
  min-width: 250px;
  max-width: 400px;
  font-size: 14px;
  line-height: 1.4;
  box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2);
}

.mascot-speech::before {
  content: '';
  position: absolute;
  left: -20px;
  top: 30px;
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 10px 20px 10px 0;
  border-color: transparent var(--newton-fg) transparent transparent;
}

.mascot-speech::after {
  content: '';
  position: absolute;
  left: -14px;
  top: 33px;
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 7px 14px 7px 0;
  border-color: transparent white transparent transparent;
}

.content-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
  margin-top: 20px;
}

.content-card {
  background: white;
  border: 3px solid var(--newton-border);
  padding: 20px;
  position: relative;
}

.card-label {
  position: absolute;
  top: -15px;
  left: 20px;
  background: var(--yellow);
  padding: 5px 15px;
  font-family: 'VT323', monospace;
  font-size: 16px;
  letter-spacing: 2px;
  border: 2px solid var(--newton-border);
}

.card-title {
  font-family: 'VT323', monospace;
  font-size: 24px;
  margin-bottom: 10px;
  letter-spacing: 2px;
}

.card-description {
  font-size: 12px;
  line-height: 1.6;
  letter-spacing: 1px;
}

.card-thumbnail {
  width: 100%;
  height: 120px;
  background: var(--gray);
  border: 2px solid var(--newton-border);
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
}

.admin-panel {
  margin-top: 20px;
  background: var(--pink);
  border: 4px solid var(--newton-border);
  padding: 25px;
}

.admin-title {
  font-family: 'VT323', monospace;
  font-size: 28px;
  margin-bottom: 20px;
  letter-spacing: 3px;
  color: white;
  text-shadow: 2px 2px 0 var(--newton-border);
}

.broadcast-input {
  width: 100%;
  padding: 15px;
  border: 3px solid var(--newton-border);
  background: white;
  font-family: 'IBM Plex Mono', monospace;
  font-size: 14px;
  min-height: 100px;
  margin-bottom: 15px;
  resize: vertical;
}

.sprite-selector {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
  flex-wrap: wrap;
}

.sprite-option {
  width: 60px;
  height: 60px;
  border: 3px solid var(--newton-border);
  background: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  text-align: center;
  line-height: 1.2;
  padding: 5px;
  transition: all 0.2s;
}

.sprite-option:hover {
  background: var(--yellow);
}

.sprite-option.selected {
  border-color: var(--pink);
  border-width: 4px;
  background: var(--yellow);
}

.pending-accounts {
  margin-top: 25px;
  padding-top: 25px;
  border-top: 3px solid var(--newton-border);
}

.pending-title {
  font-family: 'VT323', monospace;
  font-size: 22px;
  margin-bottom: 15px;
  letter-spacing: 2px;
}

.pending-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.pending-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 15px;
  background: white;
  border: 2px solid var(--newton-border);
}

.pending-id {
  font-family: 'IBM Plex Mono', monospace;
  font-size: 14px;
  letter-spacing: 1px;
}

.pending-actions {
  display: flex;
  gap: 10px;
}

.action-btn {
  padding: 8px 20px;
  border: 2px solid var(--newton-border);
  background: var(--newton-highlight);
  color: white;
  font-family: 'VT323', monospace;
  font-size: 16px;
  cursor: pointer;
  letter-spacing: 1px;
}

.action-btn.approve {
  background: #4CAF50;
}

.action-btn.deny {
  background: #f44336;
}

.broadcast-notification {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  border: 4px solid var(--newton-border);
  box-shadow: 10px 10px 0 rgba(0, 0, 0, 0.5);
  padding: 30px;
  min-width: 400px;
  max-width: 600px;
  z-index: 1000;
  display: none;
  animation: bounceIn 0.5s;
}

.broadcast-notification.show {
  display: block;
}

.broadcast-header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 20px;
}

.broadcast-sprite {
  width: 80px;
  height: 80px;
  border: 3px solid var(--newton-border);
  background: var(--newton-light);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  flex-shrink: 0;
}

.broadcast-text {
  flex: 1;
  font-size: 16px;
  line-height: 1.6;
  letter-spacing: 1px;
}

.broadcast-from {
  text-align: right;
  font-family: 'VT323', monospace;
  font-size: 18px;
  margin-top: 15px;
  letter-spacing: 2px;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@keyframes slideDown {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes bounceIn {
  0% {
    transform: translate(-50%, -50%) scale(0.3);
    opacity: 0;
  }
  50% {
    transform: translate(-50%, -50%) scale(1.05);
  }
  70% {
    transform: translate(-50%, -50%) scale(0.9);
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
}

.logout-btn {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 10px 20px;
  background: var(--newton-fg);
  color: white;
  border: 3px solid var(--newton-border);
  font-family: 'VT323', monospace;
  font-size: 18px;
  cursor: pointer;
  letter-spacing: 2px;
  z-index: 100;
}

.logout-btn:hover {
  background: var(--newton-highlight);
}

audio {
  display: none;
}
</style>
</head>
<body>

<div id="loading-screen" class="screen active">
  <div class="loading-content">
    <div class="upeo-logo">
      <svg class="upeo-bird" viewBox="0 0 200 200">
        <path d="M60,140 L40,100 Q40,80 60,70 L80,80 L100,60 L120,70 L140,50 Q160,60 150,90 L130,120 Q120,140 100,140 L80,130 L60,140 Z M100,80 Q110,85 105,95 Q100,100 90,95 Q85,85 100,80 Z"/>
        <circle cx="130" cy="90" r="30" fill="none" stroke="currentColor" stroke-width="4"/>
        <path d="M140,80 Q150,75 160,80" stroke="currentColor" stroke-width="3" fill="none"/>
      </svg>
    </div>
    <div class="loading-text">
      RESTARTING OS VER.3.2.2<br>
      UPEO ID confirmed<br>
      DATA SWALLOW<br>
      is for registered use only.
    </div>
  </div>
  
  <div class="loading-bar">
    <div class="loading-progress" id="progress-bar"></div>
  </div>

  <div class="plugin-icons">
    <div class="plugin-icon">‚öô</div>
    <div class="plugin-icon">‚úà</div>
    <div class="plugin-icon">üéÆ</div>
    <div class="plugin-icon">‚äï</div>
    <div class="plugin-icon">Ë™û</div>
    <div class="plugin-icon">‚ò∫</div>
  </div>

  <div class="data-swallow">
    <div class="swallow-header">
      <div class="swallow-logo">DATA SWALLOW</div>
      <div class="swallow-disk">
        DATA SWALLOW 40
        UPEO VER.3.2
        SYSTEM STARTUP
        ACE-C QUANTUM SYSTEMS
        <div class="disk-circle">‚äï</div>
      </div>
    </div>
    <div class="swallow-text">DATA SWALLOW 40 „ÇíËµ∑Âãï‰∏≠„Åß„Åô„ÄÇ</div>
  </div>
</div>

<div id="login-screen" class="screen">
  <div class="login-container">
    <div class="login-title">ARCS</div>
    <div class="login-subtitle">ADVANCED RESEARCH & CONTAINMENT SYSTEM</div>
    
    <div class="input-group">
      <label class="input-label">OPERATOR ID</label>
      <input type="text" id="login-id" class="newton-input" placeholder="Enter your ID">
    </div>
    
    <div class="button-group">
      <button class="newton-btn primary" onclick="login()">LOGIN</button>
      <button class="newton-btn" onclick="createAccount()">CREATE ACCOUNT</button>
    </div>
    
    <div id="status-message" class="status-message"></div>
  </div>
</div>

<div id="dashboard" class="screen">
  <button class="logout-btn" onclick="logout()">LOGOUT</button>
  
  <div class="menu-bar">
    <div class="menu-item active">MENU</div>
    <div class="menu-item">REPORTS</div>
    <div class="menu-item">WHO</div>
    <div class="menu-item">ORIGINS</div>
    <div class="menu-item">WORLD</div>
    <div class="menu-item">STAFF</div>
    <div class="menu-item">INFORMATION</div>
  </div>

  <div class="window">
    <div class="window-title-bar">
      <span>SYSTEM STATUS</span>
      <div class="window-close">√ó</div>
    </div>
    <div class="window-content">
      <div class="banner-area" id="banner-area">
        <div class="banner-mascot">
          <div class="mascot-container">
            <div class="mascot-img" id="mascot-display">üé≠</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="content-grid">
    <div class="content-card">
      <div class="card-label">STAY, STAY, READ THE REPORT !!</div>
      <div class="card-thumbnail">üì∞</div>
      <div class="card-title">SCP 2025</div>
      <div class="card-description">
        THE CURSE IS LIFTED !!! THE WRITING IS OVER !!! I FINALLY FINISHED THIS ARTICLE !!! ETSA
      </div>
    </div>

    <div class="content-card">
      <div class="card-label">CHECK THE LATEST INCIDENTS HERE</div>
      <div class="card-thumbnail">üìã</div>
      <div class="card-title">WHAT'S NEW?</div>
      <div class="card-description">
        > CHECK THIS SECTION FOR THE LATEST INCIDENTS AND UPDATES
      </div>
    </div>

    <div class="content-card">
      <div class="card-label">FEATURED SITE</div>
      <div class="card-thumbnail">üåê</div>
      <div class="card-title">GARY SYMOR</div>
      <div class="card-description">
        NO SITE FEATURE YET -- SO JUST CHECK SOME OF MY WORK UNTIL I HAVE FOUND A SUITABLE SITE TO JOIN
      </div>
    </div>

    <div class="content-card">
      <div class="card-label">BE SURE TO TAKE A LOOK, IT IS NEW !!!</div>
      <div class="card-thumbnail">üé®</div>
      <div class="card-title">INTERPRETATIONZZ</div>
      <div class="card-description">
        MUSIC & DANCE SHOW INSPIRED BY THE GOLDEN AGE OF AFRO-AMERICAN CULTURE -- JAZZ ME UP IT
      </div>
    </div>
  </div>

  <div id="admin-panel" style="display: none;">
    <div class="admin-panel">
      <div class="admin-title">OPERATOR ADMIN PANEL - OBUNTO</div>
      
      <label class="input-label">BROADCAST MESSAGE</label>
      <textarea id="broadcast-text" class="broadcast-input" placeholder="Type your broadcast message here..."></textarea>
      
      <label class="input-label">SELECT SPRITE</label>
      <div class="sprite-selector">
        <div class="sprite-option selected" data-sprite="normal">NORMAL</div>
        <div class="sprite-option" data-sprite="happy">HAPPY</div>
        <div class="sprite-option" data-sprite="sad">SAD</div>
        <div class="sprite-option" data-sprite="annoyed">ANNOYED</div>
        <div class="sprite-option" data-sprite="bug">BUG</div>
        <div class="sprite-option" data-sprite="dizzy">DIZZY</div>
        <div class="sprite-option" data-sprite="hollow">HOLLOW</div>
        <div class="sprite-option" data-sprite="panic">PANIC</div>
        <div class="sprite-option" data-sprite="sleeping">SLEEPING</div>
        <div class="sprite-option" data-sprite="smug">SMUG</div>
        <div class="sprite-option" data-sprite="stare">STARE</div>
        <div class="sprite-option" data-sprite="suspicious">SUSPICIOUS</div>
        <div class="sprite-option" data-sprite="werror">W.ERROR</div>
      </div>
      
      <button class="newton-btn primary" onclick="sendBroadcast()">BROADCAST</button>

      <div class="pending-accounts">
        <div class="pending-title">PENDING ACCOUNT APPROVALS</div>
        <div class="pending-list" id="pending-list"></div>
      </div>
    </div>
  </div>
</div>

<div id="broadcast-notification" class="broadcast-notification">
  <div class="broadcast-header">
    <div class="broadcast-sprite" id="broadcast-sprite-display">üé≠</div>
    <div class="broadcast-text" id="broadcast-text-display"></div>
  </div>
  <div class="broadcast-from">- BROADCAST FROM OPERATOR OBUNTO</div>
</div>

<audio id="audio-loading" src="assets/audio/loading1.wav"></audio>
<audio id="audio-poweron" src="assets/audio/poweron.wav"></audio>
<audio id="audio-request-sent" src="assets/audio/requestsent.wav"></audio>
<audio id="audio-request-denied" src="assets/audio/requestdenied.wav"></audio>
<audio id="audio-new-message" src="assets/audio/newmessage.wav"></audio>
<audio id="audio-bluecode" src="assets/audio/bluecode.wav"></audio>

<script>
const ADMIN_ID = '118107921024376';
let currentUser = null;
let selectedSprite = 'normal';

const spriteEmojis = {
  'normal': 'üé≠',
  'happy': 'üòä',
  'sad': 'üò¢',
  'annoyed': 'üò§',
  'bug': 'üêõ',
  'dizzy': 'üòµ',
  'hollow': 'üò∂',
  'panic': 'üò±',
  'sleeping': 'üò¥',
  'smug': 'üòè',
  'stare': 'üëÄ',
  'suspicious': 'ü§®',
  'werror': '‚ö†Ô∏è'
};

async function initStorage() {
  try {
    const users = await window.storage.get('arcs_users');
    if (!users) {
      await window.storage.set('arcs_users', JSON.stringify({
        [ADMIN_ID]: { id: ADMIN_ID, approved: true, name: 'Obunto' }
      }));
    }
    
    const pending = await window.storage.get('arcs_pending');
    if (!pending) {
      await window.storage.set('arcs_pending', JSON.stringify([]));
    }
  } catch (e) {
    console.log('Storage initialization:', e);
  }
}

function playSound(audioId) {
  try {
    const audio = document.getElementById(audioId);
    if (audio) {
      audio.currentTime = 0;
      audio.play().catch(e => console.log('Audio play failed:', e));
    }
  } catch (e) {
    console.log('Sound error:', e);
  }
}

async function startLoading() {
  playSound('audio-loading');
  
  let progress = 0;
  const progressBar = document.getElementById('progress-bar');
  
  const interval = setInterval(() => {
    progress += Math.random() * 15;
    if (progress >= 100) {
      progress = 100;
      clearInterval(interval);
      setTimeout(() => {
        playSound('audio-poweron');
        showScreen('login-screen');
      }, 500);
    }
    progressBar.style.width = progress + '%';
  }, 200);
}

function showScreen(screenId) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(screenId).classList.add('active');
}

function showStatus(message, isError = false) {
  const statusEl = document.getElementById('status-message');
  statusEl.textContent = message;
  statusEl.style.background = isError ? '#f44336' : '#ffd700';
  statusEl.style.color = isError ? 'white' : '#1a1a1a';
  statusEl.classList.add('show');
  
  setTimeout(() => {
    statusEl.classList.remove('show');
  }, 4000);
}

async function login() {
  const id = document.getElementById('login-id').value.trim();
  
  if (!id) {
    showStatus('Please enter an Operator ID', true);
    return;
  }
  
  try {
    const usersData = await window.storage.get('arcs_users');
    const users = usersData ? JSON.parse(usersData.value) : {};
    
    const user = users[id];
    
    if (!user) {
      playSound('audio-request-denied');
      showStatus('Operator ID not found. Please create an account.', true);
      return;
    }
    
    if (!user.approved) {
      playSound('audio-request-denied');
      showStatus('Account pending approval. Please wait for administrator authorization.', true);
      return;
    }
    
    playSound('audio-poweron');
    currentUser = user;
    document.getElementById('login-id').value = '';
    showScreen('dashboard');
    
    if (id === ADMIN_ID) {
      document.getElementById('admin-panel').style.display = 'block';
      loadPendingAccounts();
    } else {
      document.getElementById('admin-panel').style.display = 'none';
    }
    
    checkForBroadcasts();
  } catch (e) {
    console.error('Login error:', e);
    showStatus('System error. Please try again.', true);
  }
}

async function createAccount() {
  const id = document.getElementById('login-id').value.trim();
  
  if (!id) {
    showStatus('Please enter an Operator ID', true);
    return;
  }
  
  if (id.length < 5) {
    showStatus('Operator ID must be at least 5 characters', true);
    return;
  }
  
  try {
    const usersData = await window.storage.get('arcs_users');
    const users = usersData ? JSON.parse(usersData.value) : {};
    
    if (users[id]) {
      showStatus('This Operator ID already exists', true);
      return;
    }
    
    const pendingData = await window.storage.get('arcs_pending');
    const pending = pendingData ? JSON.parse(pendingData.value) : [];
    
    if (pending.includes(id)) {
      showStatus('This ID is already pending approval', true);
      return;
    }
    
    pending.push(id);
    await window.storage.set('arcs_pending', JSON.stringify(pending));
    
    playSound('audio-request-sent');
    showStatus('Account creation request sent! Waiting for administrator approval.');
    document.getElementById('login-id').value = '';
  } catch (e) {
    console.error('Create account error:', e);
    showStatus('System error. Please try again.', true);
  }
}

async function loadPendingAccounts() {
  try {
    const pendingData = await window.storage.get('arcs_pending');
    const pending = pendingData ? JSON.parse(pendingData.value) : [];
    
    const listEl = document.getElementById('pending-list');
    listEl.innerHTML = '';
    
    if (pending.length === 0) {
      listEl.innerHTML = '<div style="text-align: center; padding: 20px;">No pending accounts</div>';
      return;
    }
    
    pending.forEach(id => {
      const item = document.createElement('div');
      item.className = 'pending-item';
      item.innerHTML = `
        <div class="pending-id">${id}</div>
        <div class="pending-actions">
          <button class="action-btn approve" onclick="approveAccount('${id}')">APPROVE</button>
          <button class="action-btn deny" onclick="denyAccount('${id}')">DENY</button>
        </div>
      `;
      listEl.appendChild(item);
    });
  } catch (e) {
    console.error('Load pending error:', e);
  }
}

async function approveAccount(id) {
  try {
    const usersData = await window.storage.get('arcs_users');
    const users = usersData ? JSON.parse(usersData.value) : {};
    
    users[id] = { id: id, approved: true, name: `Operator_${id.slice(-4)}` };
    await window.storage.set('arcs_users', JSON.stringify(users));
    
    const pendingData = await window.storage.get('arcs_pending');
    const pending = pendingData ? JSON.parse(pendingData.value) : [];
    const newPending = pending.filter(p => p !== id);
    await window.storage.set('arcs_pending', JSON.stringify(newPending));
    
    playSound('audio-bluecode');
    loadPendingAccounts();
  } catch (e) {
    console.error('Approve error:', e);
  }
}

async function denyAccount(id) {
  try {
    const pendingData = await window.storage.get('arcs_pending');
    const pending = pendingData ? JSON.parse(pendingData.value) : [];
    const newPending = pending.filter(p => p !== id);
    await window.storage.set('arcs_pending', JSON.stringify(newPending));
    
    playSound('audio-request-denied');
    loadPendingAccounts();
  } catch (e) {
    console.error('Deny error:', e);
  }
}

async function sendBroadcast() {
  const text = document.getElementById('broadcast-text').value.trim();
  
  if (!text) {
    alert('Please enter a broadcast message');
    return;
  }
  
  try {
    const broadcast = {
      text: text,
      sprite: selectedSprite,
      timestamp: Date.now()
    };
    
    await window.storage.set('arcs_latest_broadcast', JSON.stringify(broadcast), true);
    
    playSound('audio-new-message');
    showBroadcast(broadcast);
    
    document.getElementById('broadcast-text').value = '';
  } catch (e) {
    console.error('Broadcast error:', e);
    alert('Error sending broadcast');
  }
}

function showBroadcast(broadcast) {
  const notif = document.getElementById('broadcast-notification');
  const spriteDisplay = document.getElementById('broadcast-sprite-display');
  const textDisplay = document.getElementById('broadcast-text-display');
  
  spriteDisplay.textContent = spriteEmojis[broadcast.sprite] || 'üé≠';
  textDisplay.textContent = broadcast.text;
  
  notif.classList.add('show');
  
  setTimeout(() => {
    notif.classList.remove('show');
  }, 8000);
}

async function checkForBroadcasts() {
  try {
    const broadcastData = await window.storage.get('arcs_latest_broadcast', true);
    if (broadcastData) {
      const broadcast = JSON.parse(broadcastData.value);
      const lastSeen = localStorage.getItem('lastBroadcastSeen');
      
      if (!lastSeen || broadcast.timestamp > parseInt(lastSeen)) {
        setTimeout(() => {
          playSound('audio-new-message');
          showBroadcast(broadcast);
        }, 2000);
        
        localStorage.setItem('lastBroadcastSeen', broadcast.timestamp);
      }
    }
  } catch (e) {
    console.log('No broadcast found');
  }
}

function logout() {
  currentUser = null;
  document.getElementById('login-id').value = '';
  showScreen('login-screen');
  playSound('audio-request-sent');
}

document.querySelectorAll('.sprite-option').forEach(option => {
  option.addEventListener('click', function() {
    document.querySelectorAll('.sprite-option').forEach(o => o.classList.remove('selected'));
    this.classList.add('selected');
    selectedSprite = this.dataset.sprite;
  });
});

window.addEventListener('load', async () => {
  await initStorage();
  setTimeout(startLoading, 1000);
});
</script>

</body>
</html>